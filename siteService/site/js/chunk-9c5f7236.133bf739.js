(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c5f7236"],{"0a40":function(e,t,n){},"534f":function(e,t,n){"use strict";n("96cf");var r=n("1da1"),a=n("d4ec"),u=n("bee2"),i=n("ecb7"),s=n("773f"),c=function(){function e(){Object(a["a"])(this,e)}return Object(u["a"])(e,[{key:"registerUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].post("".concat(s["a"].baseApiUrl,"/authentication/registerUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loginUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].post("".concat(s["a"].baseApiUrl,"/authentication/loginUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkPermission",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].get("".concat(s["a"].baseApiUrl,"/authentication/checkPermission")));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateUserInfo",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].post("".concat(s["a"].baseApiUrl,"/authentication/updateUserInfo"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserInfo",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getUserInfo")));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUnapprovedUserList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getUnapprovedUsers"),{params:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAllUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getAllUser"),{params:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"approvedUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].post("".concat(s["a"].baseApiUrl,"/authentication/approvedUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteUser",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].post("".concat(s["a"].baseApiUrl,"/authentication/deleteUser"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setAdmin",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].post("".concat(s["a"].baseApiUrl,"/authentication/setAdmin"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setApproved",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].post("".concat(s["a"].baseApiUrl,"/authentication/setApproved"),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserRegisterInfo",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getUserRegisterInfo")));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBlogInfo",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getBlogInfo")));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new c},c5f1:function(e,t,n){"use strict";n("0a40")},e9b7:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{attrs:{data:e.userList,size:"mini"}},[n("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center"}}),n("el-table-column",{attrs:{prop:"avatar",label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-avatar",{attrs:{src:e.row.avatar}})]}}])}),n("el-table-column",{attrs:{prop:"introduction",label:"简介",align:"center"}}),n("el-table-column",{attrs:{prop:"approved",label:"是否冻结账号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{value:!t.row.approved},on:{change:function(n){return e.switchApproved(t.row)}}})]}}])}),n("el-table-column",{attrs:{prop:"isAdmin",label:"是否设置为管理员",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.switchAdmin(t.row)}},model:{value:t.row.isAdmin,callback:function(n){e.$set(t.row,"isAdmin",n)},expression:"scope.row.isAdmin"}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.rejectedUser(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"current-page":e.searchParams.pageNum},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.searchParams,"pageNum",t)},"update:current-page":function(t){return e.$set(e.searchParams,"pageNum",t)}}})],1)},a=[],u=n("534f"),i={name:"Permission",data:function(){return{searchParams:{pageNum:1,limit:10},total:0,userList:[]}},mounted:function(){this.getUserList()},methods:{getUserList:function(){var e=this;u["a"].getAllUser(this.searchParams).then((function(t){200===t.data.status?(e.total=t.data.data.total,e.userList=t.data.data.userList):e.$message.error(t.data.message)}))},handleCurrentChange:function(e){this.searchParams.pageNum=e,this.getUserList()},switchAdmin:function(e){var t=this;if(!e.approved)return e.isAdmin=!e.isAdmin,void this.$message.warning("该用户账号还未通过审核");this.$confirm("确定更改该用户的管理员权限吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u["a"].setAdmin({key:e.key,isAdmin:e.isAdmin}).then((function(e){200==e.data.status&&t.$message.success(e.data.message)}))})).catch((function(){e.isAdmin=!e.isAdmin,t.$message.info("已取消更改用户管理权限")}))},switchApproved:function(e){var t=this;e.approved=!e.approved,this.$confirm("确定更改该用户的账号状态吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u["a"].setApproved({key:e.key,approved:e.approved}).then((function(e){200==e.data.status&&t.$message.success(e.data.message)}))})).catch((function(){e.approved=!e.approved,t.$message.info("已取消更改用户账号状态")}))},rejectedUser:function(e){var t=this;this.$confirm("此操作将永久删除该用户及其所有文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u["a"].deleteUser({key:e.key}).then((function(e){200===e.data.status?(t.$message.success(e.data.message),t.searchUserParams.pageNum=1,t.getUserList()):t.$message.error(e.data.message)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},s=i,c=(n("c5f1"),n("2877")),o=Object(c["a"])(s,r,a,!1,null,"90aa68d6",null);t["default"]=o.exports}}]);