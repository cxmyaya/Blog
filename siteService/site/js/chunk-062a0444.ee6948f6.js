(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-062a0444"],{2114:function(t,e,a){var r=a("313e");function n(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var i=r.extendComponentView({type:"bmap",render:function(t,e,a){var i=!0,o=t.getBMap(),s=a.getZr().painter.getViewportRoot(),u=t.coordinateSystem,p=function(e,r){if(!i){var n=s.parentNode.parentNode.parentNode,o=[-parseInt(n.style.left,10)||0,-parseInt(n.style.top,10)||0];s.style.left=o[0]+"px",s.style.top=o[1]+"px",u.setMapOffset(o),t.__mapOffset=o,a.dispatchAction({type:"bmapRoam"})}};function c(){i||a.dispatchAction({type:"bmapRoam"})}o.removeEventListener("moving",this._oldMoveHandler),o.removeEventListener("moveend",this._oldMoveHandler),o.removeEventListener("zoomend",this._oldZoomEndHandler),o.addEventListener("moving",p),o.addEventListener("moveend",p),o.addEventListener("zoomend",c),this._oldMoveHandler=p,this._oldZoomEndHandler=c;var l=t.get("roam");l&&"scale"!==l?o.enableDragging():o.disableDragging(),l&&"move"!==l?(o.enableScrollWheelZoom(),o.enableDoubleClickZoom(),o.enablePinchToZoom()):(o.disableScrollWheelZoom(),o.disableDoubleClickZoom(),o.disablePinchToZoom());var h=t.__mapStyle,d=t.get("mapStyle")||{},f=JSON.stringify(d);JSON.stringify(h)!==f&&(n(g)||o.setMapStyle(r.util.clone(d)),t.__mapStyle=JSON.parse(f));var m=t.__mapStyle2,g=t.get("mapStyleV2")||{},v=JSON.stringify(g);JSON.stringify(m)!==v&&(n(g)||o.setMapStyleV2(r.util.clone(g)),t.__mapStyle2=JSON.parse(v)),i=!1}});t.exports=i},"4ae9":function(t,e,a){var r,n=a("313e"),i=n.util,o=n.graphic,s=n.matrix;function u(t,e){this._bmap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e,this._projection=new BMap.MercatorProjection}function p(t,e){return e=e||[0,0],i.map([0,1],(function(a){var r=e[a],n=t[a]/2,i=[],o=[];return i[a]=r-n,o[a]=r+n,i[1-a]=o[1-a]=e[1-a],Math.abs(this.dataToPoint(i)[a]-this.dataToPoint(o)[a])}),this)}function c(){function t(t){this._root=t}return t.prototype=new BMap.Overlay,t.prototype.initialize=function(t){return t.getPanes().labelPane.appendChild(this._root),this._root},t.prototype.draw=function(){},t}u.prototype.dimensions=["lng","lat"],u.prototype.setZoom=function(t){this._zoom=t},u.prototype.setCenter=function(t){this._center=this._projection.lngLatToPoint(new BMap.Point(t[0],t[1]))},u.prototype.setMapOffset=function(t){this._mapOffset=t},u.prototype.getBMap=function(){return this._bmap},u.prototype.dataToPoint=function(t){var e=new BMap.Point(t[0],t[1]),a=this._bmap.pointToOverlayPixel(e),r=this._mapOffset;return[a.x-r[0],a.y-r[1]]},u.prototype.pointToData=function(t){var e=this._mapOffset;t=this._bmap.overlayPixelToPoint({x:t[0]+e[0],y:t[1]+e[1]});return[t.lng,t.lat]},u.prototype.getViewRect=function(){var t=this._api;return new o.BoundingRect(0,0,t.getWidth(),t.getHeight())},u.prototype.getRoamTransform=function(){return s.create()},u.prototype.prepareCustoms=function(t){var e=this.getViewRect();return{coordSys:{type:"bmap",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:i.bind(this.dataToPoint,this),size:i.bind(p,this)}}},u.dimensions=u.prototype.dimensions,u.create=function(t,e){var a,n=e.getDom();t.eachComponent("bmap",(function(t){var i=e.getZr().painter,o=i.getViewportRoot();if("undefined"===typeof BMap)throw new Error("BMap api is not loaded");if(r=r||c(),a)throw new Error("Only one bmap component can exist");if(!t.__bmap){var s=n.querySelector(".ec-extension-bmap");s&&(o.style.left="0px",o.style.top="0px",n.removeChild(s)),s=document.createElement("div"),s.style.cssText="width:100%;height:100%",s.classList.add("ec-extension-bmap"),n.appendChild(s);var p=t.get("mapOptions")||{};delete p.mapType;var l=t.__bmap=new BMap.Map(s,p),h=new r(o);l.addOverlay(h),i.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}l=t.__bmap;var d=t.get("center"),f=t.get("zoom");if(d&&f){var m=l.getCenter(),g=l.getZoom(),v=t.centerOrZoomChanged([m.lng,m.lat],g);if(v){var b=new BMap.Point(d[0],d[1]);l.centerAndZoom(b,f)}}a=new u(l,e),a.setMapOffset(t.__mapOffset||[0,0]),a.setZoom(f),a.setCenter(d),t.coordinateSystem=a})),t.eachSeries((function(t){"bmap"===t.get("coordinateSystem")&&(t.coordinateSystem=a)}))};var l=u;t.exports=l},"534f":function(t,e,a){"use strict";a("96cf");var r=a("1da1"),n=a("d4ec"),i=a("bee2"),o=a("ecb7"),s=a("773f"),u=function(){function t(){Object(n["a"])(this,t)}return Object(i["a"])(t,[{key:"registerUser",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].post("".concat(s["a"].baseApiUrl,"/authentication/registerUser"),e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loginUser",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].post("".concat(s["a"].baseApiUrl,"/authentication/loginUser"),e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"checkPermission",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].get("".concat(s["a"].baseApiUrl,"/authentication/checkPermission")));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateUserInfo",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].post("".concat(s["a"].baseApiUrl,"/authentication/updateUserInfo"),e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getUserInfo",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getUserInfo")));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUnapprovedUserList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getUnapprovedUsers"),{params:e}));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getAllUser",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getAllUser"),{params:e}));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"approvedUser",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].post("".concat(s["a"].baseApiUrl,"/authentication/approvedUser"),e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteUser",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].post("".concat(s["a"].baseApiUrl,"/authentication/deleteUser"),e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setAdmin",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].post("".concat(s["a"].baseApiUrl,"/authentication/setAdmin"),e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setApproved",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].post("".concat(s["a"].baseApiUrl,"/authentication/setApproved"),e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getUserRegisterInfo",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getUserRegisterInfo")));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getBlogInfo",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o["a"].get("".concat(s["a"].baseApiUrl,"/authentication/getBlogInfo")));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),t}();e["a"]=new u},"5d99":function(t,e,a){var r=a("313e");function n(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}var i=r.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(t,e){this.option.center=t,this.option.zoom=e},centerOrZoomChanged:function(t,e){var a=this.option;return!(n(t,a.center)&&e===a.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}});t.exports=i},"7af8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20,type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"box-card",staticStyle:{position:"relative",height:"100%"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("当前用户总数")])]),a("div",{staticClass:"num-box"},[t._v(" "+t._s(t.userNum)+" ")])])],1),a("el-col",{attrs:{span:18}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("用户注册趋势")])]),a("div",{ref:"userDataWrapper"},[a("div",{ref:"userData",style:{width:t.userDataChartsSize.width+"px",height:t.userDataChartsSize.height+"px",margin:"auto"}})])])],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20,type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"box-card",staticStyle:{position:"relative",height:"100%"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("当前文章总数")])]),a("div",{staticClass:"num-box"},[t._v(" "+t._s(t.blogNum)+" ")])])],1),a("el-col",{attrs:{span:18}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("文章发布趋势")])]),a("div",{ref:"userDataWrapper"},[a("div",{ref:"blogData",style:{width:t.userDataChartsSize.width+"px",height:t.userDataChartsSize.height+"px",margin:"auto"}})])])],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("用户位置分布")])]),a("div",{ref:"visitorDataWrapper"},[a("div",{ref:"visitorData",style:{width:t.visitorDataChartsSize.width+"px",height:t.visitorDataChartsSize.height+"px",margin:" 0 auto"}})])])],1)],1),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("用户访问数据表")])]),a("el-table",{attrs:{data:t.visitorData,stripe:""}},[a("el-table-column",{attrs:{prop:"ip",label:"IP"}}),a("el-table-column",{attrs:{prop:"province",label:"省份"}}),a("el-table-column",{attrs:{prop:"city",label:"城市"}}),a("el-table-column",{attrs:{prop:"visitTime",label:"访问时间"}}),a("el-table-column",{attrs:{prop:"location",label:"用户坐标"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.location[0]))]),t._v("-"),a("span",[t._v(t._s(e.row.location[1]))])]}}])})],1),a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"current-page":t.searchParams.pageNum},on:{"current-change":t.handleUserCurrentChange,"update:currentPage":function(e){return t.$set(t.searchParams,"pageNum",e)},"update:current-page":function(e){return t.$set(t.searchParams,"pageNum",e)}}})],1)],1)],1)],1)},n=[],i=a("534f"),o=(a("96cf"),a("1da1")),s=a("d4ec"),u=a("bee2"),p=a("ecb7"),c=a("773f"),l=function(){function t(){Object(s["a"])(this,t)}return Object(u["a"])(t,[{key:"getWebSiteData",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",p["a"].get("".concat(c["a"].baseApiUrl,"/webSiteData/getVisitorData"),{params:e}));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),h=new l,d=(a("a00a"),{name:"DataView",data:function(){var t=this;return{userDataChartsSize:{width:600,height:300},userDataCharts:null,userDataOption:{tooltip:{trigger:"axis",formatter:function(e){return t.$echarts.format.formatTime("yyyy-MM-dd",e[0].axisValue)}},dataZoom:[{type:"inside",show:!0,xAxisIndex:0},{type:"slider",show:!0,xAxisIndex:0,height:10,bottom:10,left:100,right:100}],xAxis:{type:"time",boundaryGap:!1,position:{bottom:"10%"},axisLabel:{fontSize:12,formatter:function(e){return t.$echarts.format.formatTime("yyyy-MM-dd",e)}}},yAxis:{type:"value"},series:[{type:"line",data:[],smooth:!0}]},userNum:0,blogDataOption:{tooltip:{trigger:"axis",formatter:function(e){return t.$echarts.format.formatTime("yyyy-MM-dd",e[0].axisValue)}},dataZoom:[{type:"inside",show:!0,xAxisIndex:0},{type:"slider",show:!0,xAxisIndex:0,height:10,bottom:10,left:100,right:100}],xAxis:{type:"time",boundaryGap:!1,position:{bottom:"10%"},axisLabel:{fontSize:12,formatter:function(e){return t.$echarts.format.formatTime("yyyy-MM-dd",e)}}},yAxis:{type:"value"},series:[{type:"bar",data:[],smooth:!0}]},blogNum:0,blogDataCharts:null,visitorDataChartsSize:{width:600,height:300},visitorDataCharts:null,visitorDataOption:{bmap:{center:[114,28],zoom:5,roam:!0},series:[{type:"effectScatter",data:[],coordinateSystem:"bmap"}]},visitorData:[],searchParams:{pageNum:1,limit:10},total:0}},mounted:function(){this.userDataChartsSize.width=this.$refs.userDataWrapper.clientWidth,this.userDataChartsSize.height=.3*this.$refs.userDataWrapper.clientWidth,this.visitorDataChartsSize.width=this.$refs.visitorDataWrapper.clientWidth,this.visitorDataChartsSize.height=.3*this.$refs.visitorDataWrapper.clientWidth,this.getUserRegisterInfo(),this.getBlogInfo(),this.getVisitorMap()},methods:{getUserRegisterInfo:function(){var t=this;i["a"].getUserRegisterInfo().then((function(e){if(200===e.data.status){var a=[];t.userNum=e.data.data.length;for(var r=0,n=e.data.data.length;r<n;r++)a.push([new Date(e.data.data[r].createTime),1]);t.userDataOption.series[0].data=a,t.userDataCharts=t.$echarts.init(t.$refs.userData),t.userDataCharts.setOption(t.userDataOption)}else t.$message.error(e.data.message)}))},getBlogInfo:function(){var t=this;i["a"].getBlogInfo().then((function(e){if(200===e.data.status){var a=[];t.blogNum=e.data.data.length;for(var r=0,n=e.data.data.length;r<n;r++)a.push([new Date(e.data.data[r].lastModified),1]);t.blogDataOption.series[0].data=a,t.blogDataCharts=t.$echarts.init(t.$refs.blogData),t.blogDataCharts.setOption(t.blogDataOption)}else t.$message.error(e.data.message)}))},getVisitorMap:function(){var t=this;h.getWebSiteData(this.searchParams).then((function(e){if(200===e.data.status){null!=t.visitorDataCharts&&""!=t.visitorDataCharts&&void 0!=t.visitorDataCharts&&t.visitorDataCharts.dispose(),console.log(t.visitorDataCharts,1111),t.visitorDataCharts=t.$echarts.init(t.$refs.visitorData);var a=[];t.visitorData=e.data.data.visitorData,t.total=e.data.data.total;for(var r=0,n=t.visitorData.length;r<n;r++)a.push(t.visitorData[r].location);t.visitorDataOption.series[0].data=a,t.visitorDataCharts.setOption(t.visitorDataOption);var i=t.visitorDataCharts.getModel().getComponent("bmap").getBMap();i.setMapStyleV2({styleId:"653892c1d754df79a06f74b81e5c59d0"})}}))},handleUserCurrentChange:function(t){this.searchParams.pageNum=t,this.getVisitorMap()}}}),f=d,m=(a("97b2"),a("2877")),g=Object(m["a"])(f,r,n,!1,null,"3477c0f9",null);e["default"]=g.exports},"97b2":function(t,e,a){"use strict";a("e959")},a00a:function(t,e,a){var r=a("313e"),n=a("4ae9");a("5d99"),a("2114"),r.registerCoordinateSystem("bmap",n),r.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},(function(t,e){e.eachComponent("bmap",(function(t){var e=t.getBMap(),a=e.getCenter();t.setCenterAndZoom([a.lng,a.lat],e.getZoom())}))}));var i="1.0.0";e.version=i},e959:function(t,e,a){}}]);