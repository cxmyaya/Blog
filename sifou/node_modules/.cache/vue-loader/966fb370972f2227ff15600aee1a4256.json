{"remainingRequest":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\丫丫\\web\\CODE\\blog\\sifou\\src\\components\\Global_Editor.vue?vue&type=style&index=0&id=b68d7dae&scoped=true&lang=css&","dependencies":[{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\src\\components\\Global_Editor.vue","mtime":1608388461463},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovZGVlcC8gLmVsLWRpdmlkZXItLWhvcml6b250YWx7CiAgbWFyZ2luOjEycHggMAp9Ci9kZWVwLyAuYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQgewogIGJvcmRlcjogMXB4IGRhc2hlZCAjZDlkOWQ5OwogIGJvcmRlci1yYWRpdXM6IDZweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW47Cn0KL2RlZXAvIC5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZDpob3ZlciB7CiAgYm9yZGVyLWNvbG9yOiAjNDA5RUZGOwp9Ci9kZWVwLyAuYXZhdGFyLXVwbG9hZGVyLWljb24gewogIGZvbnQtc2l6ZTogMjhweDsKICBjb2xvcjogIzhjOTM5ZDsKICB3aWR0aDogMTc4cHg7CiAgaGVpZ2h0OiAxNzhweDsKICBsaW5lLWhlaWdodDogMTc4cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci9kZWVwLyAuYXZhdGFyIHsKICB3aWR0aDogMTc4cHg7CiAgaGVpZ2h0OiAxNzhweDsKICBkaXNwbGF5OiBibG9jazsKfQoKL2RlZXAvIC5lbC10YWcgKyAuZWwtdGFnIHsKICBtYXJnaW4tbGVmdDogMTBweDsKfQovZGVlcC8gLmJ1dHRvbi1uZXctdGFnIHsKICBtYXJnaW4tbGVmdDogMTBweDsKICBoZWlnaHQ6IDMycHg7CiAgbGluZS1oZWlnaHQ6IDMwcHg7CiAgcGFkZGluZy10b3A6IDA7CiAgcGFkZGluZy1ib3R0b206IDA7Cn0KL2RlZXAvIC5pbnB1dC1uZXctdGFnIHsKICB3aWR0aDogOTBweDsKICBtYXJnaW4tbGVmdDogMTBweDsKICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tOwp9Cg=="},{"version":3,"sources":["Global_Editor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Global_Editor.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-card v-loading=\"isPublishing\">\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <span>写文章</span>\r\n        </el-col>\r\n        <el-col :span='12'>\r\n          <span style=\"float: right;color:#409EFF;cursor: pointer;\" @click='publish'>发布</span>\r\n        </el-col>\r\n      </el-row>\r\n      <el-divider></el-divider>\r\n     \r\n      <el-row :gutter=\"200\" style=\"margin-bottom:20px\">\r\n        <el-col :span=\"4\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            :action=\"`${defaultConfig.baseApiUrl}/uploadImg`\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleAvatarSuccess\"\r\n            name='blogIllustrations'\r\n            >\r\n            <img v-if=\"blogData.cover\" :src=\"blogData.cover\" class=\"avatar\">\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\">封面</i>\r\n          </el-upload>\r\n        </el-col>\r\n        <el-col :span=\"20\">\r\n          <el-form :model=\"blogData\" ref='blogForm' :rules=\"rules\">\r\n            <el-form-item prop=\"title\">\r\n              <el-row>\r\n                <el-input placeholder=\"请输入文章标题\" v-model='blogData.title' clearable></el-input>\r\n              </el-row>\r\n            </el-form-item>\r\n            <el-form-item prop=\"description\">\r\n              <el-row>\r\n                <el-input placeholder=\"请输入文章简介\" v-model='blogData.description' clearable ></el-input>\r\n              </el-row>\r\n            </el-form-item>\r\n          </el-form>\r\n          <el-row>\r\n            <el-tag\r\n              :key=\"tag\"\r\n              v-for=\"tag in blogData.tags\"\r\n              closable\r\n              :disable-transitions=\"false\"\r\n              @close=\"handleClose(tag)\">\r\n              {{tag}}\r\n            </el-tag>\r\n            <el-input\r\n              class=\"input-new-tag\"\r\n              v-if=\"inputVisible\"\r\n              v-model=\"tagValue\"\r\n              ref=\"saveTagInput\"\r\n              size=\"small\"\r\n              @keyup.enter.native=\"handleInputConfirm\"\r\n              @blur=\"handleInputConfirm\"\r\n            >\r\n            </el-input>\r\n            <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ New Tag</el-button>\r\n          </el-row>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col>\r\n          <div id=\"editor\" ref='editor'></div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import defaultConfig from '@/config/config.default'\r\n  import Editor from 'wangeditor'\r\n  import hljs from 'highlight.js'\r\n  import ImgFileService from '@/service/ImgFileService'\r\n  import blogService from '@/service/BlogService'\r\n  export default {\r\n    name: \"GlobalEditor\",\r\n    data(){\r\n      return {\r\n        defaultConfig,\r\n        Editor,\r\n        hljs,\r\n        tagValue:'',\r\n        inputVisible:false,\r\n        editor:null,\r\n        isPublishing:false,\r\n        blogData:{\r\n          cover:null, //封面图片地址\r\n          title:'',\r\n          description:'',\r\n          tags:[],\r\n          content:''\r\n        },\r\n        rules:{\r\n          title:{required:true, message:'请输入文章标题', trigger:'blur'},\r\n          description:{required:true, message:'请输入文章简介', trigger:'blur'}\r\n        }\r\n      }\r\n    },\r\n    mounted(){\r\n     this.initEditor()\r\n    },\r\n    methods:{\r\n      publish(){\r\n        this.$refs.blogForm.validate(valid => {\r\n          if(valid){\r\n            this.blogData.content = this.editor.txt.html()\r\n            if(!this.blogData.content){\r\n              this.$message.warning('文章内容不能为空')\r\n            }else{\r\n              this.isPublishing = true\r\n              blogService.createBlog(this.blogData).then(res => {\r\n                if(res.data.status === 200){\r\n                  this.$message.success(res.data.message)\r\n                }else{\r\n                  this.$message.error(res.data.message)\r\n                }\r\n              }).finally(() => {\r\n                this.isPublishing = false\r\n              })\r\n            }\r\n          }\r\n        })\r\n      },\r\n      handleAvatarSuccess(res){\r\n        this.blogData.cover = res.data.imgList[0]\r\n      },\r\n      handleClose(tag){\r\n        this.blogData.tags.splice(this.blogData.tags.indexOf(tag,1))\r\n      },\r\n      handleInputConfirm(){\r\n        if(this.tagValue){\r\n          this.blogData.tags.push(this.tagValue)\r\n        }\r\n        this.inputVisible = false\r\n        this.tagValue = ''\r\n      },\r\n      showInput(){\r\n        this.inputVisible = true\r\n        this.$nextTick( () => {\r\n          this.$refs.saveTagInput.$refs.input.focus()\r\n        })\r\n      },\r\n      initEditor(){\r\n        this.editor = new Editor(this.$refs.editor) //初始化编辑器\r\n        this.editor.highlight = hljs //实现代码编辑器里的代码高亮\r\n      \r\n        //功能菜单配置\r\n        this.editor.config.menus = [\r\n          'head',\r\n          'bold',\r\n          'fontSize',\r\n          'fontName',\r\n          'italic',\r\n          'underline',\r\n          'strikeThrough',\r\n          'indent',\r\n          'lineHeight',\r\n          'foreColor',\r\n          'backColor',\r\n          'link',\r\n          'list',\r\n          'justify',\r\n          'quote',\r\n          'emoticon',\r\n          'image',\r\n          'video',\r\n          'table',\r\n          'code',\r\n          'splitLine',\r\n          'undo',\r\n          'redo',\r\n      ]\r\n\r\n        //编辑器基本尺寸、聚焦、占位符的相关配置\r\n        this.editor.config.height = 400\r\n        this.editor.config.placeholder = '请输入文章内容'\r\n      \r\n\r\n        //字体颜色、背景色的预设值\r\n        this.editor.config.colors.push('#58a','yellow')\r\n\r\n        //字体种类\r\n        // this.editor.config.fontNames = ['黑体']\r\n\r\n        //字号预设值\r\n        this.editor.config.fontSizes = {\r\n          'x-small': { name: '10px', value: '1' },\r\n          'small': { name: '13px', value: '2' },\r\n          'normal': { name: '16px', value: '3' },\r\n          'large': { name: '18px', value: '4' },\r\n          'x-large': { name: '24px', value: '5' },\r\n          'xx-large': { name: '32px', value: '6' },\r\n          'xxx-large': { name: '48px', value: '7' },\r\n        }\r\n\r\n        //行高配置\r\n        // this.editor.config.lineHeights = ['1','1.25']\r\n\r\n        //表情包\r\n        this.editor.config.emotions = [\r\n          {\r\n            title:'收藏',\r\n            type:'image',\r\n            content:[\r\n              {\r\n                alt:'[嘿嘿]',\r\n                src:'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1608379345609&di=130d3873ab4bfbd933ce484672cd3978&imgtype=0&src=http%3A%2F%2Fww3.sinaimg.cn%2Flarge%2F9150e4e5jw1fc6cgaj6amj203405kq2u.jpg'\r\n              },\r\n              {\r\n                alt:'[妙啊]',\r\n                src:'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1067150941,30006510&fm=26&gp=0.jpg'\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n\r\n        //支持的编辑语言\r\n        // this.editor.config.languageType = []\r\n\r\n        //是否支持全屏\r\n        this.editor.config.showFullScreen = true\r\n\r\n        //自定义的插入链接的内容校验\r\n        this.editor.config.linkCheck = function(text,link){\r\n          console.log(text,link)\r\n          //校验规则\r\n          return true\r\n        }\r\n\r\n        //插入网络图片的内容校验\r\n        this.editor.config.linkImgCallback = function(imgSrc){\r\n          console.log(imgSrc)\r\n          //校验规则\r\n          return true\r\n        }\r\n\r\n        //插入本地图片的校验\r\n        this.editor.config.linkImgCheck = function(imgSrc){\r\n          console.log(imgSrc)\r\n          //校验规则\r\n          return true\r\n        }\r\n\r\n        //上传图片大小和个数的限制\r\n        this.editor.config.uploadImgMaxSize = 2*1024*1024 //2M\r\n        this.editor.config.uploadImgMaxLength = 9 //9张\r\n\r\n        //插入本地图片，实现本地图片上传并插入到编辑器里\r\n        this.editor.config.customUploadImg = function(resultFiles, insertImgFn){\r\n          //resultFiles: 相当于 input type=file 选中的目标\r\n          //insertImgFn: 回调函数，获取图片的最终地址，插入到编辑器\r\n          let imgData = new FormData()\r\n          for(let i = 0, len = resultFiles.length; i < len; i++){\r\n            imgData.append('blogIllustrations',resultFiles[i])\r\n          }\r\n          ImgFileService.uploadImgFile(imgData).then(res => {\r\n            if(res.data.status === 200){\r\n              let imgList = res.data.data.imgList\r\n              for(let i = 0, len = imgList.length; i < len;  i++){\r\n                insertImgFn(imgList[i])\r\n              }\r\n            }\r\n          })\r\n        }\r\n\r\n        //粘贴文本的内容处理\r\n        this.editor.config.pasteTextHandle = function(pasteStr){\r\n          console.log(pasteStr)\r\n          return '解析过后的pasteStr'\r\n        }\r\n        //编辑器内容的获取 纯文本、html、json格式的\r\n\r\n        //编辑器内容的修改\r\n\r\n        this.editor.create() //把实例变成元素\r\n      }\r\n    },\r\n    beforeDestroy(){\r\n      this.editor.destroy() //\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  /deep/ .el-divider--horizontal{\r\n    margin:12px 0\r\n  }\r\n  /deep/ .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  /deep/ .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n  /deep/ .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  /deep/ .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n\r\n  /deep/ .el-tag + .el-tag {\r\n    margin-left: 10px;\r\n  }\r\n  /deep/ .button-new-tag {\r\n    margin-left: 10px;\r\n    height: 32px;\r\n    line-height: 30px;\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n  }\r\n  /deep/ .input-new-tag {\r\n    width: 90px;\r\n    margin-left: 10px;\r\n    vertical-align: bottom;\r\n  }\r\n</style>"]}]}