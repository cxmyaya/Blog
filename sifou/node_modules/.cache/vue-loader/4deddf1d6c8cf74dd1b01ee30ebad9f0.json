{"remainingRequest":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\丫丫\\web\\CODE\\blog\\sifou\\src\\components\\ArticleDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\src\\components\\ArticleDetail.vue","mtime":1612165502121},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCbG9nU2VydmljZSBmcm9tICdAL3NlcnZpY2UvQmxvZ1NlcnZpY2UnCmltcG9ydCBVc2VyRGV0YWlsU2VydmljZSBmcm9tICdAL3NlcnZpY2UvVXNlckRldGFpbFNlcnZpY2UnCmltcG9ydCBUaXBPZmZTZXJ2aWNlIGZyb20gJ0Avc2VydmljZS9UaXBPZmZTZXJ2aWNlJwppbXBvcnQgR2xvYmFsQ29tbWVudCBmcm9tICdAL2NvbXBvbmVudHMvR2xvYmFsLUNvbW1lbnQnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiYXJ0aWNsZURldGFpbCIsCiAgY29tcG9uZW50czp7CiAgICBHbG9iYWxDb21tZW50CiAgfSwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBibG9nSWQ6JycsCiAgICAgIGJsb2dEYXRhOnsKICAgICAgICBhdXRob3I6ewogICAgICAgICAgdXNlck5hbWU6JycsCiAgICAgICAgICBhdmF0YXI6JycKICAgICAgICB9LAogICAgICAgIGxhc3RNb2RpZmllZDonJywKICAgICAgICBjb250ZW50OicnLAogICAgICAgIGNvbW1lbnRzOltdLAogICAgICAgIGxpa2VzOicnLAogICAgICAgIHZpZXdzOicnCiAgICAgIH0sCiAgICAgIHVzZXJEYXRhOnt9LAogICAgICB0aXBPZmZSZWFzb246JycsCiAgICAgIGlzU2hvd1RpcE9mZjpmYWxzZQogICAgfQogIH0sCiAgY3JlYXRlZCgpewogICAgdGhpcy5ibG9nSWQgPSBOdW1iZXIodGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgdGhpcy51c2VyRGF0YSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlckRhdGEnKSkKICB9LAogIG1vdW50ZWQoKXsKICAgIHRoaXMuZ2V0QmxvZ0J5SWQoMSkKICB9LAogIGZpbHRlcnM6ewogICAgdHJhbnNmb3JtVGltZSh0aW1lKXsKICAgICAgbGV0IGJsb2dDcmVhdGVUaW1lID0gbmV3IERhdGUodGltZSkKICAgICAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKQogICAgICBsZXQgb2Zmc2V0VGltZSA9IGN1cnJlbnRUaW1lIC0gYmxvZ0NyZWF0ZVRpbWUKICAgICAgbGV0IG9mZnNldFNUID0gb2Zmc2V0VGltZSAvIDEwMDAKICAgICAgbGV0IG9mZnNldE1UID0gb2Zmc2V0U1QgLyA2MAogICAgICBsZXQgb2Zmc2V0SFQgPSBvZmZzZXRNVCAvIDYwCiAgICAgIGxldCBvZmZzZXREVCA9IG9mZnNldEhUIC8gMjQKICAgICAgaWYob2Zmc2V0RFQgPj0gMzY1KXsKICAgICAgICByZXR1cm4gYOWPkeihqOS6jiAke01hdGguZmxvb3Iob2Zmc2V0RFQgLyAzNjUpfSDlubTkuYvliY1gCiAgICAgIH1lbHNlIGlmKG9mZnNldERUID49IDMwKXsKICAgICAgICByZXR1cm4gYOWPkeihqOS6jiAke01hdGguZmxvb3Iob2Zmc2V0RFQgLyAzMCl9IOS4quaciOS5i+WJjWAKICAgICAgfWVsc2UgaWYob2Zmc2V0RFQgPj0gNyl7CiAgICAgICAgcmV0dXJuIGDlj5Hooajkuo4gJHtNYXRoLmZsb29yKG9mZnNldERUIC8gNyl9IOWRqOS5i+WJjWAKICAgICAgfWVsc2UgaWYob2Zmc2V0RFQgPj0gMSl7CiAgICAgICAgcmV0dXJuIGDlj5Hooajkuo4gJHtNYXRoLmZsb29yKG9mZnNldERUKX0g5aSp5LmL5YmNYAogICAgICB9ZWxzZSBpZihvZmZzZXRIVCA+PSAxKXsKICAgICAgICByZXR1cm4gYOWPkeihqOS6jiAke01hdGguZmxvb3Iob2Zmc2V0SFQpfSDlsI/ml7bkuYvliY1gCiAgICAgIH0KICAgICAgZWxzZSBpZihvZmZzZXRNVCA+PSAxKXsKICAgICAgICByZXR1cm4gYOWPkeihqOS6jiAke01hdGguZmxvb3Iob2Zmc2V0TVQpfSDliIbpkp/kuYvliY1gCiAgICAgIH0KICAgICAgZWxzZSBpZihvZmZzZXRTVCA+PSAxKXsKICAgICAgICByZXR1cm4gYOWPkeihqOS6jiAke01hdGguZmxvb3Iob2Zmc2V0U1QpfSDnp5Lpkp/kuYvliY1gCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgZ2V0QmxvZ0J5SWQoZmlyc3RWaWV3KXsKICAgICAgQmxvZ1NlcnZpY2UuZ2V0QmxvZ0J5SWQoe2Jsb2dJZDp0aGlzLmJsb2dJZCxmaXJzdFZpZXd9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzID09PSAyMDApewogICAgICAgICAgdGhpcy5ibG9nRGF0YSA9IHJlcy5kYXRhLmRhdGEuYmxvZ0RhdGEKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgZ29CYWNrKCl7CiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgIH0sCiAgICBzd2l0Y2hMaWtlKCl7CiAgICAgIGlmKHRoaXMudXNlckRhdGEudXNlckRldGFpbC5saWtlcy5pbmNsdWRlcyh0aGlzLmJsb2dJZCkpewogICAgICAgIC8v5Y+W5raI54K56LWeCiAgICAgICAgVXNlckRldGFpbFNlcnZpY2UuZGVsZXRlTGlrZSh7YmxvZ0lkOnRoaXMuYmxvZ0lkfSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzID09PSAyMDApewogICAgICAgICAgICB0aGlzLnVzZXJEYXRhLnVzZXJEZXRhaWwubGlrZXMuc3BsaWNlKHRoaXMudXNlckRhdGEudXNlckRldGFpbC5saWtlcy5pbmRleE9mKHRoaXMuYmxvZ0lkKSwxKQogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd1c2VyRGF0YScsSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyRGF0YSkpCiAgICAgICAgICAgIHRoaXMuZ2V0QmxvZ0J5SWQoMCkKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tZXNzYWdlKQogICAgICAgIH0pCiAgICAgIH1lbHNlewogICAgICAgIC8v54K56LWeCiAgICAgICAgVXNlckRldGFpbFNlcnZpY2Uuc2V0TGlrZSh7YmxvZ0lkOnRoaXMuYmxvZ0lkfSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzID09PSAyMDApewogICAgICAgICAgICB0aGlzLnVzZXJEYXRhLnVzZXJEZXRhaWwubGlrZXMucHVzaCh0aGlzLmJsb2dJZCkKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlckRhdGEnLEpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpKQogICAgICAgICAgICB0aGlzLmdldEJsb2dCeUlkKDApCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEubWVzc2FnZSkKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAgc3dpdGNoQXR0ZW50aW9uKCl7CiAgICAgIGlmKHRoaXMudXNlckRhdGEudXNlckRldGFpbC5hdHRlbnRpb25zLmluY2x1ZGVzKHRoaXMuYmxvZ0RhdGEuYXV0aG9yLnVzZXJOYW1lKSl7CiAgICAgICAgLy/lj5bmtojlhbPms6gKICAgICAgICBVc2VyRGV0YWlsU2VydmljZS5kZWxldGVBdHRlbnRpb24oe3VzZXJOYW1lOnRoaXMuYmxvZ0RhdGEuYXV0aG9yLnVzZXJOYW1lfSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzID09PSAyMDApewogICAgICAgICAgICB0aGlzLnVzZXJEYXRhLnVzZXJEZXRhaWwuYXR0ZW50aW9ucy5zcGxpY2UodGhpcy51c2VyRGF0YS51c2VyRGV0YWlsLmF0dGVudGlvbnMuaW5kZXhPZih0aGlzLmJsb2dJZCksMSkKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlckRhdGEnLEpTT04uc3RyaW5naWZ5KHRoaXMudXNlckRhdGEpKQogICAgICAgICAgICAvLyB0aGlzLmdldEJsb2dCeUlkKDApCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEubWVzc2FnZSkKICAgICAgICB9KQogICAgICB9ZWxzZXsKICAgICAgICAvL+WFs+azqAogICAgICAgIFVzZXJEZXRhaWxTZXJ2aWNlLnNldEF0dGVudGlvbih7dXNlck5hbWU6dGhpcy5ibG9nRGF0YS5hdXRob3IudXNlck5hbWV9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZihyZXMuZGF0YS5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgIHRoaXMudXNlckRhdGEudXNlckRldGFpbC5hdHRlbnRpb25zLnB1c2godGhpcy5ibG9nRGF0YS5hdXRob3IudXNlck5hbWUpCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJEYXRhJyxKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSkKICAgICAgICAgICAgLy8gdGhpcy5nZXRCbG9nQnlJZCgwKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHN3aXRjaEJsYWNrTGlzdCgpewogICAgICBpZih0aGlzLnVzZXJEYXRhLnVzZXJEZXRhaWwuYmxhY2tMaXN0LmluY2x1ZGVzKHRoaXMuYmxvZ0RhdGEuYXV0aG9yLnVzZXJOYW1lKSl7CiAgICAgICAgLy/lj5bmtojmi4npu5EKICAgICAgICBVc2VyRGV0YWlsU2VydmljZS5kZWxldGVCbGFja0xpc3Qoe3VzZXJOYW1lOnRoaXMuYmxvZ0RhdGEuYXV0aG9yLnVzZXJOYW1lfSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzID09PSAyMDApewogICAgICAgICAgICB0aGlzLnVzZXJEYXRhLnVzZXJEZXRhaWwuYmxhY2tMaXN0LnNwbGljZSh0aGlzLnVzZXJEYXRhLnVzZXJEZXRhaWwuYmxhY2tMaXN0LmluZGV4T2YodGhpcy5ibG9nSWQpLDEpCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJEYXRhJyxKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSkKICAgICAgICAgICAgLy8gdGhpcy5nZXRCbG9nQnlJZCgwKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpCiAgICAgICAgfSkKICAgICAgfWVsc2V7CiAgICAgICAgLy/mi4npu5EKICAgICAgICBVc2VyRGV0YWlsU2VydmljZS5zZXRCbGFja0xpc3Qoe3VzZXJOYW1lOnRoaXMuYmxvZ0RhdGEuYXV0aG9yLnVzZXJOYW1lfSkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzID09PSAyMDApewogICAgICAgICAgICB0aGlzLnVzZXJEYXRhLnVzZXJEZXRhaWwuYmxhY2tMaXN0LnB1c2godGhpcy5ibG9nRGF0YS5hdXRob3IudXNlck5hbWUpCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJEYXRhJyxKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJEYXRhKSkKICAgICAgICAgICAgLy8gdGhpcy5nZXRCbG9nQnlJZCgwKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHN3aXRjaFRpcE9mZigpewogICAgICB0aGlzLmlzU2hvd1RpcE9mZiA9ICF0aGlzLmlzU2hvd1RpcE9mZgogICAgICBpZighdGhpcy5pc1Nob3dUaXBPZmYpewogICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgYmxvZ0lkOnRoaXMuYmxvZ0lkLAogICAgICAgICAgZGVzY3JpcHRpb246dGhpcy5ibG9nRGF0YS5kZXNjcmlwdGlvbiwKICAgICAgICAgIGNvdmVyOnRoaXMuYmxvZ0RhdGEuY292ZXIsCiAgICAgICAgICB0aXRsZTp0aGlzLmJsb2dEYXRhLnRpdGxlLAogICAgICAgICAgcmVhc29uOnRoaXMudGlwT2ZmUmVhc29uCiAgICAgICAgfQogICAgICAgIFRpcE9mZlNlcnZpY2UudGlwT2ZmQXJ0aWNsZShkYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZihyZXMuZGF0YS5zdGF0dXMgPT09IDIwMCl7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMuZGF0YS5tZXNzYWdlKQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubWVzc2FnZSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["ArticleDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ArticleDetail.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"padding:20px\">\r\n    <el-page-header @back='goBack' :content='blogData.title'></el-page-header>\r\n    <el-card class=\"box-card\" style=\"margin-top:20px\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <el-row>\r\n          <el-col :span=\"1\">\r\n            <el-avatar\r\n              :src='blogData.author.avatar'\r\n            >\r\n\r\n            </el-avatar>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <span>{{blogData.author.userName}}</span>\r\n            <br>\r\n            <span>{{blogData.lastModified | transformTime}}</span>\r\n          </el-col>\r\n          <el-col :span=\"8\" :offset='8'>\r\n            <el-button\r\n             type=\"warning\" \r\n             circle \r\n             :icon=\"userData.userDetail.likes.includes(blogId) ? 'el-icon-star-on' :'el-icon-star-off '\" \r\n             size='medium'\r\n             @click='switchLike'\r\n             >\r\n            </el-button>\r\n            <el-button\r\n              v-if='!(blogData.author.userName === userData.userName)'\r\n              type=\"primary\"\r\n              :icon=\"userData.userDetail.attentions.includes(blogData.author.userName) ? 'el-icon-check' :'el-icon-plus '\" \r\n              size='medium'\r\n              @click='switchAttention'>\r\n               关注\r\n            </el-button>\r\n            <el-button \r\n              v-if='!(blogData.author.userName === userData.userName)'\r\n              type=\"danger\"\r\n              icon=\"el-icon-s-custom\" \r\n              size='medium'\r\n              @click='switchBlackList'>\r\n              {{userData.userDetail.blackList.includes(blogData.author.userName) ? '已拉黑':'拉黑'}}\r\n            </el-button>\r\n            <el-button \r\n            v-if='!(blogData.author.userName === userData.userName)' \r\n            type=\"danger\"\r\n            icon=\"el-icon-thumb\"\r\n            size='medium'\r\n            @click='switchTipOff'>举报</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <div> \r\n        <div class=\"main\" v-html='blogData.content'></div>\r\n        <div>\r\n          <el-tag v-for='(tag,index) in blogData.tags' :key='index' style='margin-right:20px' type=\"success\">{{tag}}</el-tag>\r\n        </div>\r\n        <div style=\"margin-top: 20px;\">\r\n          <el-row>\r\n            <el-col :span=\"1\"><i class=\"el-icon-star-on\"></i>{{blogData.likes}}</el-col>\r\n            <el-col :span=\"1\"><i class=\"el-icon-view\"></i>{{blogData.views}}</el-col>\r\n            <el-col :span=\"1\"><i class=\"el-icon-s-comment\"></i>{{blogData.comments.length}}</el-col>\r\n          </el-row>\r\n        </div>\r\n      </div>\r\n      <el-divider><i class=\"el-icon-s-comment\"></i></el-divider>\r\n      <GlobalComment :blogId='blogId' :comments=\"blogData.comments\"></GlobalComment>\r\n    </el-card>\r\n    <el-dialog\r\n      title=\"举报文章\"\r\n      :visible.sync = 'isShowTipOff'\r\n      width=30%>\r\n      <el-input v-model='tipOffReason' placeholder=\"举报原因\" type=\"textarea\"></el-input>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click='isShowTipOff = false'>取消</el-button>\r\n        <el-button @click='switchTipOff' type=\"primary\">确定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\n  import BlogService from '@/service/BlogService'\r\n  import UserDetailService from '@/service/UserDetailService'\r\n  import TipOffService from '@/service/TipOffService'\r\n  import GlobalComment from '@/components/Global-Comment'\r\n  export default {\r\n    name: \"articleDetail\",\r\n    components:{\r\n      GlobalComment\r\n    },\r\n    data(){\r\n      return {\r\n        blogId:'',\r\n        blogData:{\r\n          author:{\r\n            userName:'',\r\n            avatar:''\r\n          },\r\n          lastModified:'',\r\n          content:'',\r\n          comments:[],\r\n          likes:'',\r\n          views:''\r\n        },\r\n        userData:{},\r\n        tipOffReason:'',\r\n        isShowTipOff:false\r\n      }\r\n    },\r\n    created(){\r\n      this.blogId = Number(this.$route.params.id)\r\n      this.userData = JSON.parse(sessionStorage.getItem('userData'))\r\n    },\r\n    mounted(){\r\n      this.getBlogById(1)\r\n    },\r\n    filters:{\r\n      transformTime(time){\r\n        let blogCreateTime = new Date(time)\r\n        let currentTime = new Date()\r\n        let offsetTime = currentTime - blogCreateTime\r\n        let offsetST = offsetTime / 1000\r\n        let offsetMT = offsetST / 60\r\n        let offsetHT = offsetMT / 60\r\n        let offsetDT = offsetHT / 24\r\n        if(offsetDT >= 365){\r\n          return `发表于 ${Math.floor(offsetDT / 365)} 年之前`\r\n        }else if(offsetDT >= 30){\r\n          return `发表于 ${Math.floor(offsetDT / 30)} 个月之前`\r\n        }else if(offsetDT >= 7){\r\n          return `发表于 ${Math.floor(offsetDT / 7)} 周之前`\r\n        }else if(offsetDT >= 1){\r\n          return `发表于 ${Math.floor(offsetDT)} 天之前`\r\n        }else if(offsetHT >= 1){\r\n          return `发表于 ${Math.floor(offsetHT)} 小时之前`\r\n        }\r\n        else if(offsetMT >= 1){\r\n          return `发表于 ${Math.floor(offsetMT)} 分钟之前`\r\n        }\r\n        else if(offsetST >= 1){\r\n          return `发表于 ${Math.floor(offsetST)} 秒钟之前`\r\n        }\r\n      }\r\n    },\r\n    methods:{\r\n      getBlogById(firstView){\r\n        BlogService.getBlogById({blogId:this.blogId,firstView}).then(res => {\r\n          if(res.data.status === 200){\r\n            this.blogData = res.data.data.blogData\r\n          }\r\n        })\r\n      },\r\n      goBack(){\r\n        this.$router.go(-1)\r\n      },\r\n      switchLike(){\r\n        if(this.userData.userDetail.likes.includes(this.blogId)){\r\n          //取消点赞\r\n          UserDetailService.deleteLike({blogId:this.blogId}).then(res => {\r\n            if(res.data.status === 200){\r\n              this.userData.userDetail.likes.splice(this.userData.userDetail.likes.indexOf(this.blogId),1)\r\n              sessionStorage.setItem('userData',JSON.stringify(this.userData))\r\n              this.getBlogById(0)\r\n            }\r\n            this.$message.success(res.data.message)\r\n          })\r\n        }else{\r\n          //点赞\r\n          UserDetailService.setLike({blogId:this.blogId}).then(res => {\r\n            if(res.data.status === 200){\r\n              this.userData.userDetail.likes.push(this.blogId)\r\n              sessionStorage.setItem('userData',JSON.stringify(this.userData))\r\n              this.getBlogById(0)\r\n            }\r\n            this.$message.success(res.data.message)\r\n          })\r\n        }\r\n      },\r\n      switchAttention(){\r\n        if(this.userData.userDetail.attentions.includes(this.blogData.author.userName)){\r\n          //取消关注\r\n          UserDetailService.deleteAttention({userName:this.blogData.author.userName}).then(res => {\r\n            if(res.data.status === 200){\r\n              this.userData.userDetail.attentions.splice(this.userData.userDetail.attentions.indexOf(this.blogId),1)\r\n              sessionStorage.setItem('userData',JSON.stringify(this.userData))\r\n              // this.getBlogById(0)\r\n            }\r\n            this.$message.success(res.data.message)\r\n          })\r\n        }else{\r\n          //关注\r\n          UserDetailService.setAttention({userName:this.blogData.author.userName}).then(res => {\r\n            if(res.data.status === 200){\r\n              this.userData.userDetail.attentions.push(this.blogData.author.userName)\r\n              sessionStorage.setItem('userData',JSON.stringify(this.userData))\r\n              // this.getBlogById(0)\r\n            }\r\n            this.$message.success(res.data.message)\r\n          })\r\n        }\r\n      },\r\n      switchBlackList(){\r\n        if(this.userData.userDetail.blackList.includes(this.blogData.author.userName)){\r\n          //取消拉黑\r\n          UserDetailService.deleteBlackList({userName:this.blogData.author.userName}).then(res => {\r\n            if(res.data.status === 200){\r\n              this.userData.userDetail.blackList.splice(this.userData.userDetail.blackList.indexOf(this.blogId),1)\r\n              sessionStorage.setItem('userData',JSON.stringify(this.userData))\r\n              // this.getBlogById(0)\r\n            }\r\n            this.$message.success(res.data.message)\r\n          })\r\n        }else{\r\n          //拉黑\r\n          UserDetailService.setBlackList({userName:this.blogData.author.userName}).then(res => {\r\n            if(res.data.status === 200){\r\n              this.userData.userDetail.blackList.push(this.blogData.author.userName)\r\n              sessionStorage.setItem('userData',JSON.stringify(this.userData))\r\n              // this.getBlogById(0)\r\n            }\r\n            this.$message.success(res.data.message)\r\n          })\r\n        }\r\n      },\r\n      switchTipOff(){\r\n        this.isShowTipOff = !this.isShowTipOff\r\n        if(!this.isShowTipOff){\r\n          let data = {\r\n            blogId:this.blogId,\r\n            description:this.blogData.description,\r\n            cover:this.blogData.cover,\r\n            title:this.blogData.title,\r\n            reason:this.tipOffReason\r\n          }\r\n          TipOffService.tipOffArticle(data).then(res => {\r\n            if(res.data.status === 200){\r\n              this.$message.success(res.data.message)\r\n            }else{\r\n              this.$message.error(res.data.message)\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .clearfix:before,\r\n  .clearfix:after {\r\n    display: table;\r\n    content: \"\";\r\n  }\r\n  .clearfix:after {\r\n    clear: both\r\n  }\r\n</style>"]}]}