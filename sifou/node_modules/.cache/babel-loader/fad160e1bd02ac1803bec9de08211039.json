{"remainingRequest":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\thread-loader\\dist\\cjs.js!E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\babel-loader\\lib\\index.js!E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\丫丫\\web\\CODE\\blog\\sifou\\src\\pages\\admin\\views\\Permission.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\src\\pages\\admin\\views\\Permission.vue","mtime":1612172873023},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\丫丫\\web\\CODE\\blog\\sifou\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEF1dGhvclNlcnZpY2UgZnJvbSAnQC9zZXJ2aWNlL0F1dGhvclNlcnZpY2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBlcm1pc3Npb24iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hQYXJhbXM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIGxpbWl0OiAxMAogICAgICB9LAogICAgICB0b3RhbDogMCwKICAgICAgdXNlckxpc3Q6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0VXNlckxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFVzZXJMaXN0OiBmdW5jdGlvbiBnZXRVc2VyTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIEF1dGhvclNlcnZpY2UuZ2V0QWxsVXNlcih0aGlzLnNlYXJjaFBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGEudG90YWw7CiAgICAgICAgICBfdGhpcy51c2VyTGlzdCA9IHJlcy5kYXRhLmRhdGEudXNlckxpc3Q7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5zZWFyY2hQYXJhbXMucGFnZU51bSA9IHZhbDsKICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpOwogICAgfSwKICAgIHN3aXRjaEFkbWluOiBmdW5jdGlvbiBzd2l0Y2hBZG1pbihyb3cpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoIXJvdy5hcHByb3ZlZCkgewogICAgICAgIHJvdy5pc0FkbWluID0gIXJvdy5pc0FkbWluOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+l55So5oi36LSm5Y+36L+Y5pyq6YCa6L+H5a6h5qC4Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRjb25maXJtKCfnoa7lrprmm7TmlLnor6XnlKjmiLfnmoTnrqHnkIblkZjmnYPpmZDlkJfvvJ8nLCAn6K2m5ZGKJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgQXV0aG9yU2VydmljZS5zZXRBZG1pbih7CiAgICAgICAgICBrZXk6IHJvdy5rZXksCiAgICAgICAgICBpc0FkbWluOiByb3cuaXNBZG1pbgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICByb3cuaXNBZG1pbiA9ICFyb3cuaXNBZG1pbjsKCiAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOabtOaUueeUqOaIt+euoeeQhuadg+mZkCcpOwogICAgICB9KTsKICAgIH0sCiAgICBzd2l0Y2hBcHByb3ZlZDogZnVuY3Rpb24gc3dpdGNoQXBwcm92ZWQocm93KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcm93LmFwcHJvdmVkID0gIXJvdy5hcHByb3ZlZDsKICAgICAgdGhpcy4kY29uZmlybSgn56Gu5a6a5pu05pS56K+l55So5oi355qE6LSm5Y+354q25oCB5ZCX77yfJywgJ+itpuWRiicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIEF1dGhvclNlcnZpY2Uuc2V0QXBwcm92ZWQoewogICAgICAgICAga2V5OiByb3cua2V5LAogICAgICAgICAgYXBwcm92ZWQ6IHJvdy5hcHByb3ZlZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICByb3cuYXBwcm92ZWQgPSAhcm93LmFwcHJvdmVkOwoKICAgICAgICBfdGhpczMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5pu05pS555So5oi36LSm5Y+354q25oCBJyk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlamVjdGVkVXNlcjogZnVuY3Rpb24gcmVqZWN0ZWRVc2VyKHJvdykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeeUqOaIt+WPiuWFtuaJgOacieaWh+eroCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBBdXRob3JTZXJ2aWNlLmRlbGV0ZVVzZXIoewogICAgICAgICAga2V5OiByb3cua2V5CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEubWVzc2FnZSk7CgogICAgICAgICAgICBfdGhpczQuc2VhcmNoVXNlclBhcmFtcy5wYWdlTnVtID0gMTsKCiAgICAgICAgICAgIF90aGlzNC5nZXRVc2VyTGlzdCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM0LiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Permission.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-table :data=\"userList\" size='mini'>\r\n      <el-table-column prop=\"userName\" label='用户名' align=\"center\"></el-table-column>\r\n      <el-table-column prop=\"avatar\" label='头像' align=\"center\">\r\n        <template slot-scope='scope'>\r\n            <el-avatar :src='scope.row.avatar'></el-avatar>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"introduction\" label='简介' align=\"center\"></el-table-column>\r\n      <el-table-column  prop=\"approved\" label='是否冻结账号' align=\"center\">\r\n        <template slot-scope='scope'>\r\n          <el-switch :value=\"!scope.row.approved\" @change=\"switchApproved(scope.row)\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column  prop=\"isAdmin\" label='是否设置为管理员' align=\"center\">\r\n        <template slot-scope='scope'>\r\n          <el-switch v-model=\"scope.row.isAdmin\" @change=\"switchAdmin(scope.row)\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label='操作' align=\"center\">\r\n        <template slot-scope='scope'>\r\n          <el-button type=\"danger\" size=\"mini\" @click='rejectedUser(scope.row)'>删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      layout='prev, pager, next'\r\n      :total='total'\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page.sync=\"searchParams.pageNum\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import AuthorService from '@/service/AuthorService'\r\n  export default {\r\n    name: \"Permission\",\r\n    data(){\r\n      return {\r\n        searchParams:{\r\n          pageNum:1,\r\n          limit:10\r\n        },\r\n        total:0,\r\n        userList:[]\r\n      }\r\n    },\r\n    mounted(){\r\n      this.getUserList()\r\n    },\r\n    methods:{\r\n      getUserList(){\r\n        AuthorService.getAllUser(this.searchParams).then(res => {\r\n          if(res.data.status === 200){\r\n            this.total = res.data.data.total\r\n            this.userList = res.data.data.userList\r\n          }else{\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n      },\r\n      handleCurrentChange(val){\r\n        this.searchParams.pageNum = val\r\n        this.getUserList()\r\n      },\r\n      switchAdmin(row){\r\n        if(!row.approved){\r\n          row.isAdmin = !row.isAdmin\r\n          this.$message.warning('该用户账号还未通过审核')\r\n          return\r\n        }\r\n        this.$confirm('确定更改该用户的管理员权限吗？','警告',{\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          AuthorService.setAdmin({key:row.key, isAdmin:row.isAdmin}).then(res => {\r\n            if(res.data.status == 200){\r\n              this.$message.success(res.data.message)\r\n            }\r\n          })\r\n        }).catch(() => {\r\n          row.isAdmin = !row.isAdmin\r\n          this.$message.info('已取消更改用户管理权限')\r\n        })\r\n      },\r\n      switchApproved(row){\r\n        row.approved = !row.approved\r\n        this.$confirm('确定更改该用户的账号状态吗？','警告',{\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          AuthorService.setApproved({key:row.key, approved:row.approved}).then(res => {\r\n            if(res.data.status == 200){\r\n              this.$message.success(res.data.message)\r\n            }\r\n          })\r\n        }).catch(() => {\r\n          row.approved = !row.approved\r\n          this.$message.info('已取消更改用户账号状态')\r\n        })\r\n      },\r\n      rejectedUser(row){\r\n        this.$confirm('此操作将永久删除该用户及其所有文章, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          AuthorService.deleteUser({key:row.key}).then(res => {\r\n          if(res.data.status === 200){\r\n            this.$message.success(res.data.message)\r\n            this.searchUserParams.pageNum = 1\r\n            this.getUserList()\r\n          }else{\r\n            this.$message.error(res.data.message)\r\n          }\r\n        })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });          \r\n        });\r\n        \r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  /deep/ .el-pagination{\r\n    text-align: right;\r\n  }\r\n</style>"],"sourceRoot":"src/pages/admin/views"}]}